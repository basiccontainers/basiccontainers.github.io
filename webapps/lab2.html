<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Deploy a web app by using an image from an Azure Container Registry repository | Basic Containers </title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Collection of resources for developers to get started on Azure">
    
    <link rel="preload" href="/assets/css/0.styles.6514b516.css" as="style"><link rel="preload" href="/assets/js/app.118d21cd.js" as="script"><link rel="preload" href="/assets/js/2.33b91e66.js" as="script"><link rel="preload" href="/assets/js/5.f337493f.js" as="script"><link rel="prefetch" href="/assets/js/10.05c7de4b.js"><link rel="prefetch" href="/assets/js/11.8c5be6a9.js"><link rel="prefetch" href="/assets/js/12.87630292.js"><link rel="prefetch" href="/assets/js/13.88fe2e1e.js"><link rel="prefetch" href="/assets/js/14.17bd1cef.js"><link rel="prefetch" href="/assets/js/15.a78fd5a8.js"><link rel="prefetch" href="/assets/js/16.42e82f68.js"><link rel="prefetch" href="/assets/js/17.59bb41fd.js"><link rel="prefetch" href="/assets/js/3.040216d4.js"><link rel="prefetch" href="/assets/js/4.15d706e6.js"><link rel="prefetch" href="/assets/js/6.4eddf5af.js"><link rel="prefetch" href="/assets/js/7.5494837b.js"><link rel="prefetch" href="/assets/js/8.45c9161c.js"><link rel="prefetch" href="/assets/js/9.e59b2424.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6514b516.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Basic Containers </span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="deploy-a-web-app-by-using-an-image-from-an-azure-container-registry-repository"><a href="#deploy-a-web-app-by-using-an-image-from-an-azure-container-registry-repository" class="header-anchor">#</a> Deploy a web app by using an image from an Azure Container Registry repository</h1> <p>You can deploy a web app to Azure App Service directly from Azure Container Registry.</p> <p>In the example scenario, the team wants to host the web app in App Service. They need to configure App Service to retrieve the image for the web app from the repository in Container Registry.</p> <p>In this section , you'll learn how you can configure App Service to deploy a web app from a repository in Container Registry.
<img src="/assets/img/lab2overview.2377f3fb.png" alt="lab1"></p> <h2 id="option-1-create-and-deploy-a-webapp-in-the-portal"><a href="#option-1-create-and-deploy-a-webapp-in-the-portal" class="header-anchor">#</a> (Option 1) Create and deploy a webapp in the portal</h2> <p>In the example scenario, you have uploaded the image for the web app to Azure Container Registry and is now ready to deploy the web app.</p> <ul><li>In  Azure portal home page, and under Azure services, select Create a resource. The Create a resource pane appears.</li> <li>Search for &quot;Web App&quot; or on the left  select Web, and under Popular offers, select Web App.
<img src="/assets/img/3webapp.3a9bba75.png" alt="webapp"></li> <li>On the Basics tab, enter the following values for each setting.</li></ul> <table><thead><tr><th>Setting</th> <th>value</th></tr></thead> <tbody><tr><td>Subscription</td> <td>Select your default Azure subscription in which you are allowed to create and manage resources.</td></tr> <tr><td>Resource Group</td> <td>From the dropdown list, select the existing resource group learn-deploy-container-acr-rg.</td></tr> <tr><td>Name</td> <td>Enter a unique name and make a note of it for later.</td></tr> <tr><td>Publish</td> <td>Docker Container</td></tr> <tr><td>Operating System</td> <td>Linux</td></tr> <tr><td>Region</td> <td>Select the same location that is close to you from previous exercise.</td></tr> <tr><td>App Service plan</td> <td>S1. (We use S1 to make use of slots). You will need to create a new service plan</td></tr></tbody></table> <p><img src="/assets/img/4webapp.c4edbdcf.png" alt="webapp"></p> <ul><li>Select Next: Docker &gt;.</li> <li>On the Docker tab, enter the following values for each setting.</li></ul> <table><thead><tr><th>Setting</th> <th>value</th></tr></thead> <tbody><tr><td>Options</td> <td>Single Container</td></tr> <tr><td>Image Source</td> <td>Azure Container Registry</td></tr> <tr><td>Registry</td> <td>Select your registry.</td></tr> <tr><td>Image</td> <td>webimage</td></tr> <tr><td>Tag</td> <td>latest</td></tr> <tr><td>Startup Command</td> <td>Leave this setting empty.</td></tr></tbody></table> <ul><li><img src="/assets/img/5webapp.abcd86d4.png" alt="webapp"></li> <li>Select Review and create, and then select Create. Wait until the web app has been deployed before you continue.</li> <li>To test the app, browse to https://<app-name>.azurewebsites.net, replacing <app-name> with the name of your web app. On first access, it may take some time for the app to respond because App Service must pull the entire image from the registry. If the browser times out, just refresh the page. Once the initial image is pulled, subsequent tests will run much faster.</app-name></app-name></li></ul> <h2 id="option-2-create-and-deploy-a-webapp-in-the-cloud-shell"><a href="#option-2-create-and-deploy-a-webapp-in-the-cloud-shell" class="header-anchor">#</a> (Option 2) Create and deploy a webapp in the Cloud Shell</h2> <p>To deploy a container to Azure App Service, you first create a web app on App Service, then connect the web app to the container registry. When the web app starts, App Service automatically pulls the image from the registry.</p> <ul><li>Configure the following parameters in your cloud shell</li></ul> <div class="language- extra-class"><pre class="language-text"><code>resourceGroup=&quot;ivanresourcegroup&quot;
appserviceplan=&quot;ivanappservice&quot;
appname=&quot;myapplicationivans&quot; ## This should be unique
appname=&quot;nynynynsg1&quot; ## This should be unique

az group create --location westeurope --name $resourceGroup
</code></pre></div><ul><li>Create an App Service plan using the az appservice plan create command: Creates an App Service plan</li></ul> <div class="language- extra-class"><pre class="language-text"><code>az appservice plan create --name $appserviceplan --resource-group $resourceGroup --is-linux --sku S1
</code></pre></div><ul><li>Create the web app with the az webpp create command: 	Creates an App Service app.</li></ul> <div class="language- extra-class"><pre class="language-text"><code> az webapp create --resource-group $resourceGroup --plan $appserviceplan  --name $appname --deployment-container-image-name ivanacrdemo.azurecr.io/webimage:v1 
</code></pre></div><ul><li><p>To test the app, browse to https://<app-name>.azurewebsites.net, replacing <app-name> with the name of your web app. On first access, it may take some time for the app to respond because App Service must pull the entire image from the registry. If the browser times out, just refresh the page. Once the initial image is pulled, subsequent tests will run much faster.</app-name></app-name></p></li> <li><ul><li><img src="/assets/img/1webapp.5c3589b8.png" alt="webapÃ¼p"></li></ul></li></ul> <h2 id="resources"><a href="#resources" class="header-anchor">#</a> Resources</h2> <p>https://docs.microsoft.com/en-us/azure/app-service/samples-cli</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.118d21cd.js" defer></script><script src="/assets/js/2.33b91e66.js" defer></script><script src="/assets/js/5.f337493f.js" defer></script>
  </body>
</html>
